"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{7892:function(t,e,r){r.d(e,{Ai:function(){return l},ToastProvider:function(){return i},pm:function(){return s}});var n=r(7437),o=r(2265);let a=(0,o.createContext)();function i(t){let{children:e}=t,[r,i]=(0,o.useState)([]),s=t=>{i(e=>e.filter(e=>e.id!==t))};return(0,n.jsxs)(a.Provider,{value:{showToast:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,n=Math.random().toString(36).substring(2,9);return i(o=>[...o,{id:n,message:t,type:e,duration:r}]),setTimeout(()=>{s(n)},r),n},removeToast:s},children:[e,(0,n.jsx)("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 flex flex-col-reverse gap-2",children:r.map(t=>(0,n.jsx)(c,{id:t.id,message:t.message,type:t.type,onClose:()=>s(t.id)},t.id))})]})}function s(){let t=(0,o.useContext)(a);if(!t)throw Error("useToast must be used within a ToastProvider");return t}function c(t){let{id:e,message:r,type:o,onClose:a}=t,i="success"===o?(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):"error"===o?(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});return(0,n.jsx)("div",{className:"animate-toast-slide-in",children:(0,n.jsxs)("div",{className:"flex items-center ".concat("success"===o?"bg-gradient-to-r from-green-600/90 to-green-500/90":"error"===o?"bg-gradient-to-r from-red-600/90 to-red-500/90":"bg-gradient-to-r from-primary/90 to-accent/90"," text-white px-6 py-3 rounded-lg shadow-lg backdrop-blur-md border border-white/10"),children:[(0,n.jsx)("div",{className:"mr-3",children:i}),(0,n.jsx)("p",{className:"font-medium",children:r}),(0,n.jsx)("button",{onClick:a,className:"ml-4 text-white/70 hover:text-white transition-colors",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}function l(t){let{text:e,duration:r=1e3,onComplete:a,onlyScrambleUsername:i=!1}=t,[s,c]=(0,o.useState)(""),[l,u]=(0,o.useState)(!1),[h,d]=(0,o.useState)(1);if((0,o.useEffect)(()=>{e&&(()=>{u(!0),d(1);let t="!@#$%^&*()_+-=[]{}|;:,./<>?",n="♠♣♥♦★✦✧✩✪✫✬✭✮✯✰☀☁☂☃☄★☆☇☈☉☊☋☌☍☎☏☐☑☒☓☔☕☖☗☘☙☚☛☜☝☞☟☠☡☢☣☤☥☦☧☨☩☪☫☬☭☮☯",o=e,s="";if(i&&e.includes("@")){let t=e.split("@");o=t[0],s="@"+t[1]}let l=o.length,f=Math.max(20,Math.min(30,1.5*l)),p=0,m=!1,w=setInterval(()=>{if(p>=f-1){if(!m){m=!0;let t=0,n=setInterval(()=>{if(t>=5){clearInterval(n),clearInterval(w),c(i?o+s:e),u(!1),d(0),a&&a();return}d(1-t/5),t++},.2*r/5)}return}let g="";for(let e=0;e<l;e++){let r=Math.max(0,1-Math.abs(e-p/f*(l+5))/3);if(Math.random()<p/f*1.2+.4*r+Math.max(0,.2-e/l*.2))g+=o[e];else if(/[a-zA-Z]/.test(o[e])){if(Math.random()<.15*h){let e=Math.random()<.2*h?n:t;g+=e.charAt(Math.floor(Math.random()*e.length))}else{let t=/[A-Z]/.test(o[e])?"ABCDEFGHIJKLMNOPQRSTUVWXYZ":"abcdefghijklmnopqrstuvwxyz";g+=t.charAt(Math.floor(Math.random()*t.length))}}else if(/[0-9]/.test(o[e]))Math.random()<.1*h?g+=t.charAt(Math.floor(Math.random()*t.length)):g+="0123456789".charAt(Math.floor(10*Math.random()));else{let e=.7>Math.random()?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"+t:t+(.3>Math.random()?n:"");g+=e.charAt(Math.floor(Math.random()*e.length))}}c(i?g+s:g),p++},.8*r/f);return()=>clearInterval(w)})()},[e,r,a,i]),i&&e&&e.includes("@")){let t=(s||e).split("@");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"transition-all ".concat(l?"font-mono text-accent":"text-[#0297e8]"),children:t[0]}),(0,n.jsxs)("span",{className:"text-white",children:["@",t[1]]})]})}return(0,n.jsx)("span",{className:"transition-all ".concat(l?"font-mono text-accent":""),children:s||e})}},2263:function(t,e,r){r.d(e,{Nk:function(){return h},TX:function(){return i},_S:function(){return d},_p:function(){return l},a$:function(){return a},gQ:function(){return f},iE:function(){return c},mg:function(){return u},pH:function(){return o},r:function(){return s},tm:function(){return p}});let n="https://emailapi.ajaxfnc.com",o=async(t,e)=>{try{let r=await fetch("".concat(n,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:e})}),o=await r.json();if(!r.ok)throw Error(o.error||"Login failed");let a={username:o.username,email:o.email,isAdmin:o.isAdmin,loggedIn:!0};return localStorage.setItem("user",JSON.stringify(a)),window.dispatchEvent(new Event("authChange")),a}catch(t){throw console.error("Login error:",t),t}},a=async function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{let o=await fetch("".concat(n,"/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:e,captchaToken:r})}),a=await o.json();if(!o.ok)throw Error(a.error||"Registration failed");let i={username:a.username,isAdmin:a.isAdmin,loggedIn:!0};return localStorage.setItem("user",JSON.stringify(i)),window.dispatchEvent(new Event("authChange")),i}catch(t){throw console.error("Registration error:",t),t}},i=()=>{localStorage.removeItem("user"),window.dispatchEvent(new Event("authChange"))},s=()=>{try{let t=localStorage.getItem("user");return t?JSON.parse(t):null}catch(t){return console.error("Error getting user data:",t),null}},c=async t=>{try{let e=await fetch("".concat(n,"/api/account/").concat(t)),r=await e.json();if(!e.ok)throw Error(r.error||"Failed to fetch account details");return r}catch(t){throw console.error("Error fetching account details:",t),t}};async function l(t){try{let e=await fetch("".concat(n,"/api/keys/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to fetch API keys")}let r=await e.json();if(Array.isArray(r))return r;if(r.keys&&Array.isArray(r.keys))return r.keys;return[]}catch(t){return console.error("Error fetching API keys:",t),[]}}async function u(t){try{let e=await fetch("".concat(n,"/api/account/").concat(t,"/pfp"));if(!e.ok)return null;return URL.createObjectURL(await e.blob())}catch(t){return console.error("Error fetching profile picture:",t),null}}async function h(t,e,r){try{let o=new FormData;o.append("pfp",r),o.append("password",e);let a=await fetch("".concat(n,"/api/account/").concat(t,"/pfp"),{method:"PUT",body:o});if(!a.ok){let t=await a.text(),e="Failed to update profile picture";try{e=JSON.parse(t).error||e}catch(r){e=t||e}throw Error(e)}let i=await a.text();try{return JSON.parse(i)}catch(t){return{success:!0,message:"Profile picture updated successfully"}}}catch(t){throw console.error("Error updating profile picture:",t),t}}let d=async(t,e,r)=>{try{let o=await fetch("".concat(n,"/api/account/").concat(t,"/update-username"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newUsername:e,password:r})}),a=await o.json();if(!o.ok)throw Error(a.error||"Failed to update username");let i=s();return i&&(i.username=e,localStorage.setItem("user",JSON.stringify(i)),window.dispatchEvent(new Event("authChange"))),a}catch(t){throw console.error("Error updating username:",t),t}},f=async(t,e,r)=>{try{let o=await fetch("".concat(n,"/api/account/").concat(t,"/update-password"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:e,newPassword:r})}),a=await o.json();if(!o.ok)throw Error(a.error||"Failed to update password");return a}catch(t){throw console.error("Error updating password:",t),t}},p=async(t,e)=>{try{let r=await fetch("".concat(n,"/api/account/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})}),o=await r.json();if(!r.ok)throw Error(o.error||"Failed to delete account");return localStorage.removeItem("user"),window.dispatchEvent(new Event("authChange")),o}catch(t){throw console.error("Error deleting account:",t),t}}}}]);